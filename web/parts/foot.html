        </main>
      </div>
    </div>
  </body>
<script type="text/javascript">

    function setTheme(val) {
        if (val == "dark") {
            $('table.table').addClass("table-dark");
            $('body').removeClass("text-dark bg-light").addClass("text-light bg-dark");
            $('.card:not(.bg-primary)').removeClass("text-dark bg-light").addClass("text-light bg-dark");
            $('a.nav-link').addClass("nav-link-dark");            
        } else {
            $('table.table').removeClass("table-dark");
            $('body').removeClass("text-light bg-dark").addClass("text-dark bg-light");
            $('.card:not(.bg-primary)').removeClass("text-light bg-dark").addClass("text-dark bg-light");
            $('a.nav-link').removeClass("nav-link-dark");
        }
        setCookie("rbm-theme", val, -1);
        theme = val;
        $('#themecss').attr("href", '/css/theme-' + (theme!=""? theme:"light") + '.css');
    }

$(function () {
    // Set the active sidebar item
    $('#' + $('#title').data('navbaractive')).addClass('active');

    // set the values in the header
    var remoteversion = '0.0.0.0';
    $('#updatemsg').hide();

    theme = getCookie("rbm-theme");
    if (theme != "") { $('#theme').val(theme); setTheme(theme); }

    $('#theme').change(function () { setTheme($('#theme').val()); });

    $("#updatenow").click(function () {
        $.ajax({
            url: '/update', success: function (result) {
                $('.modal-body').text('Rainbowminer will be updated to Version '+remoteversion+'. Please be patient!');
                $('.modal-title').text('Update started');
                $('#myModal').modal({ show: true });
                $('#updatemsg').hide();
            }
        })
    });

    start_uptime = Date.now();
    last_uptime  = 0;

    (function p() {
        $.ajax({
            url: '/currentprofit', success: function (result) {
                $("#profit").html(formatBTC(result.AllProfitBTC));
                
                if (!last_uptime || parseInt(result.Uptime.Seconds) < last_uptime) {
                    start_uptime = Date.now();
                    last_uptime = parseInt(result.Uptime.Seconds);
                }

                var xchange = new Array();
                xchange.push("1 BTC");
                $.each(result.Rates, function (key, itm) {
                    if (key != "BTC") xchange.push(parseFloat(formatBTC(itm)).toFixed(2) + " " + key);
                });
                $("#exchangerates").html(xchange.join(" = "));
                setTimeout(p, 10000);
            }
        })
    })();

    (function q() {
        if (!globalconfig || !globalconfig.Version) { setTimeout(q, 1000); return }
        $('.workername').text(globalconfig.WorkerName)
        var version = formatVersion(globalconfig.Version)
        remoteversion = formatVersion(globalconfig.RemoteVersion)
        $('#version').text('v' + version)
        if (version < remoteversion) {
            $('#updatelink').attr({ "title": 'Show info about release v' + remoteversion, "href": globalconfig.ManualURI }).text('v' + remoteversion)
            $('#updatemsg').show()
        } else {
            $('#updatemsg').hide()
        }
        setTimeout(q, 600000);
    })();

    (function r() {
        $('#uptime').text(formatUptime(last_uptime + Math.round((Date.now() - start_uptime) / 1000)));
        setTimeout(r, 1000);
    })();
});
  
</script>
</html>