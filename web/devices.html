<!--#include file="/parts/head.html" -->
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 id="title" data-navbaractive="navdevices" class="h2">Devices</h1>
</div>
<p>These are the devices (GPUs and CPUs) detected by MultiPoolMiner.</p>
<table id="devices" class="table"
  data-toggle="table"
  data-url="/devices"
  data-response-handler="formatDevices"
  data-cache="false"
  data-show-columns="true"
  data-show-toggle="true"
  data-show-refresh="true"
  data-icons-prefix="fa"
  data-icons="icons"
  data-detail-view="true"
  data-detail-formatter="detailFormatter"
>
  <thead>
      <tr>
          <th data-field="Name" data-sortable="true">Name</th>
          <th data-field="Vendor" data-sortable="true">Vendor</th>
          <th data-field="Model" data-sortable="true">Model</th>
          <th data-field="tMemory" data-sortable="true">Mem</th>
          <th data-field="tCores" data-sortable="true">Cores</th>
          <th data-field="tDriverVersion">Driver</th>
          <th data-field="tUtilization" data-sortable="true">Load</th>
          <th data-field="tPowerDraw" data-sortable="true">Power</th>
          <th data-field="tFanSpeed" data-sortable="true">Fan</th>
          <th data-field="tTemperature" data-sortable="true">°C</th>
          <th data-field="tClock" data-sortable="true">Clock</th>
          <th data-field="tClockMem" data-sortable="true">Memclk</th>
          <th data-field="tPowerLimitPercent" data-sortable="true">PL</th>
      </tr>
  </thead>
</table>

<!-- End of page scripts -->
<script type="text/javascript">
  function formatDevices(data) {
  // This function can alter the returned data before building the table, formatting it in a way
  // that is easier to display and manipulate in a table
  $.each(data, function(index, item) {
    // Format the device(s)
    if (item.OpenCL) {
        item.tMemory = formatBytes(item.OpenCL.GlobalMemSize)
        item.tDriverVersion = item.OpenCL.DriverVersion
    } else {
        item.tMemory = "N/A"
        item.tDriverVersion = "N/A"
    }
    
    if (item.OpenCL) {
        item.tClockSpeed = item.OpenCL.MaxClockFrequency
        item.tCores = item.OpenCL.MaxComputeUnits
    } else if (item.CIM) {
        item.tClockSpeed = item.CIM.MaxClockSpeed
        item.tCores = item.CIM.NumberOfLogicalProcessors
        item.tPowerDraw = item.Data.PowerDraw
    } else {
        item.tClockSpeed = "N/A"
        item.tCores = "N/A"
    }

    if (item.OpenCL || item.CIM) {
        item.tPowerDraw = Math.round(parseFloat(item.Data.PowerDraw)) + ' W'
        item.tFanSpeed = item.Data.FanSpeed + ' rpm'
        item.tClock = item.Data.Clock + ' MHz'
        item.tClockMem = item.Data.ClockMem + ' MHz'
        item.tPowerLimitPercent = item.Data.PowerLimitPercent + ' %'
        item.tTemperature = item.Data.Temperature + ' °C'
        item.tUtilization = item.Data.Utilization + ' %'
    } else {
        item.tPowerDraw = Math.round(parseFloat(item.Data.PowerDraw)) + ' W'
        item.tFanSpeed = "N/A"
        item.tClock = item.Data.Clock + ' MHz'
        item.tClockMem = "N/A"
        item.tPowerLimitPercent = "N/A"
        item.tTemperature = item.Data.Temperature + ' °C'
        item.tUtilization = item.Data.Utilization + ' %'
    }

  });
  return data;
}
</script>
<!--#include file="/parts/foot.html" -->